<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="title">老挝交易通 - 房产</title>
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;700&display=swap" rel="stylesheet">
  <style>
* {
  box-sizing: border-box;
  margin: 0; padding: 0;
}
body {
  font-family: 'Nunito', sans-serif;
  background: linear-gradient(to bottom, #0d1b2a, #1b263b);
  color: #e0f2f1;
  display: flex;
  flex-direction: column;
  min-height: 100vh;
}
header {
  background: linear-gradient(to right, #1e3c72, #2a5298);
  color: #fff;
  padding: 40px 20px 20px;
  text-align: center;
  box-shadow: 0 4px 16px rgba(0, 212, 255, 0.4);
}
header h1 {
  font-size: 2.4em;
  font-weight: 800;
  margin-bottom: 10px;
}
.lang-buttons {
  margin-top: 10px;
}
.lang-buttons button {
  background: #e0f2f1;
  color: #1e3c72;
  border: none;
  padding: 8px 16px;
  border-radius: 30px;
  margin: 0 6px;
  font-weight: 700;
  cursor: pointer;
  transition: all 0.3s ease;
}
.lang-buttons button:hover {
  background: #00d4ff;
  color: #fff;
}
.controls {
  max-width: 1200px;
  margin: 30px auto 10px;
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 15px;
}
.controls input, .controls select {
  padding: 10px 15px;
  border-radius: 25px;
  border: none;
  width: 220px;
  background: #243447;
  color: #fff;
  font-size: 1em;
  box-shadow: 0 0 8px rgba(0, 212, 255, 0.15);
  transition: all 0.3s ease;
}
.controls input:focus, .controls select:focus {
  outline: none;
  box-shadow: 0 0 10px #00d4ff;
}
main {
  flex: 1;
  padding: 40px 20px;
  max-width: 1200px;
  margin: auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 30px;
}
.property-card {
  background: #1a2a3a;
  border-radius: 20px;
  overflow: hidden;
  box-shadow: 0 6px 16px rgba(0, 212, 255, 0.2);
  transition: transform 0.3s ease, box-shadow 0.3s ease;
  display: flex;
  flex-direction: column;
  cursor: pointer;
}
.property-card:hover {
  transform: scale(1.03);
  box-shadow: 0 10px 28px rgba(0, 212, 255, 0.4);
}
.property-card img {
  width: 100%;
  height: 170px;
  object-fit: cover;
}
.property-card h3 {
  margin: 15px 15px 10px;
  font-size: 1.3em;
  font-weight: 700;
  color: #00d4ff;
}
.property-card p {
  margin: 0 15px 10px;
  color: #b0bec5;
  font-size: 0.95em;
}
.property-card .details {
  margin: 5px 15px;
  font-size: 0.85em;
  color: #80deea;
}
.property-card .price {
  margin: 10px 15px 15px;
  font-weight: 700;
  font-size: 1.1em;
  color: #33ffaa;
}
.property-card .details-btn {
  margin: 10px 15px 15px;
  background: linear-gradient(to right, #00d4ff, #33ffaa);
  border: none;
  border-radius: 20px;
  padding: 10px;
  font-weight: bold;
  cursor: pointer;
  color: #002b36;
  transition: background 0.3s ease;
}
.property-card .details-btn:hover {
  background: linear-gradient(to right, #33ffaa, #00d4ff);
  color: #000;
}
.pagination {
  text-align: center;
  margin: 20px;
}
.pagination button {
  background: #00d4ff;
  border: none;
  padding: 10px 20px;
  margin: 0 10px;
  border-radius: 25px;
  font-weight: bold;
  cursor: pointer;
  color: #002b36;
  transition: background 0.3s ease;
}
.pagination button:hover:not(:disabled) {
  background: #33ffaa;
}
.pagination button:disabled {
  opacity: 0.4;
  cursor: not-allowed;
}
.back-home {
  display: inline-block;
  margin: 30px auto;
  background: linear-gradient(to right, #00d4ff, #33ffaa);
  padding: 12px 28px;
  border-radius: 30px;
  text-decoration: none;
  font-weight: bold;
  color: #002b36;
  box-shadow: 0 4px 10px rgba(0, 212, 255, 0.4);
  transition: transform 0.3s ease;
}
.back-home:hover {
  transform: scale(1.05);
  color: #000;
}
footer {
  background: #121d2a;
  color: #88a;
  text-align: center;
  padding: 15px;
  font-size: 0.9em;
}
@media (max-width: 768px) {
  .controls input, .controls select {
    width: 100%;
  }
}

  </style>


<header>
  <h1 data-i18n="real_house">房产列表</h1>
  <div class="lang-buttons">
    <button onclick="setLanguage('zh')">中文</button>
    <button onclick="setLanguage('lo')">ພາສາລາວ</button>
  </div>
</header>

<div class="controls">
  <input type="text" id="searchInput" data-i18n-placeholder="search_placeholder" placeholder="搜索房产..." />
  <input type="number" id="minPrice" data-i18n-placeholder="min_price" placeholder="最低价" min="0" />
  <input type="number" id="maxPrice" data-i18n-placeholder="max_price" placeholder="最高价" min="0" />
  <select id="sortOrder">
    <option value="default" data-i18n="sort_default">默认排序</option>
    <option value="price_asc" data-i18n="sort_price_asc">价格升序</option>
    <option value="price_desc" data-i18n="sort_price_desc">价格降序</option>
  </select>
</div>

<main id="propertyContainer"></main>

<div class="pagination">
  <button id="prevPage" onclick="changePage(-1)" data-i18n="prev_page">上一页</button>
  <span id="pageInfo"></span>
  <button id="nextPage" onclick="changePage(1)" data-i18n="next_page">下一页</button>
</div>

<a href="index.html" class="back-home" data-i18n="back_home">返回首页</a>

<footer>© 2025 老挝交易通 房产交易平台</footer>

<script>
const translations = {
  zh: {
    title: "老挝交易通 - 房产",
    real_house: "房产列表",
    back_home: "返回首页",
    search_placeholder: "搜索房产...",
    min_price: "最低价",
    max_price: "最高价",
    prev_page: "上一页",
    next_page: "下一页",
    page_info: (current, total) => `第 ${current} 页 / 共 ${total} 页`,
    currency: "KIP",
    sort_default: "默认排序",
    sort_price_asc: "价格升序",
    sort_price_desc: "价格降序",
    prop1_title: "市中心三室两厅",
    prop1_desc: "地理位置优越，配套设施齐全，120㎡，高层",
    prop2_title: "郊区别墅",
    prop2_desc: "环境优美，私密性强，250㎡，带花园",
    prop3_title: "精装修公寓",
    prop3_desc: "现代设计，拎包入住，80㎡，中层",
    prop4_title: "学区房",
    prop4_desc: "教育资源丰富，交通便利，100㎡，低层",
    label_area: "面积",
    label_floor: "楼层",
    label_room: "户型",
    details_btn: "查看详情"
  },
  lo: {
    title: "ລາຍການອະສັງຫາລື",
    real_house: "ລາຍການອະສັງຫາລື",
    back_home: "ກັບໄປໜ້າຫຼັກ",
    search_placeholder: "ຄົ້ນຫາອະສັງຫາລື...",
    min_price: "ລາຄາຕ່ໍາສຸດ",
    max_price: "ລາຄາສູງສຸດ",
    prev_page: "ຫນ້າກ່ອນ",
    next_page: "ຫນ້າຕໍ່ໄປ",
    page_info: (current, total) => `ຫນ້າ ${current} / ${total}`,
    currency: "₭",
    sort_default: "ຈັດລຽງມາດຕະຖານ",
    sort_price_asc: "ລາຄາຕໍ່ໍ່ຕ່ໍາ",
    sort_price_desc: "ລາຄາຕໍ່ສູງ",
    prop1_title: "ອາພາດເມນ 3 ຫ້ອງນອນ",
    prop1_desc: "ຕຳແໜ່ງການດີ, ສະບັບ 120㎡, ຊັ້ນສູງ",
    prop2_title: "ບິລເລທົ່າລະບາຍ",
    prop2_desc: "ສວນສີຂອງບ້ານ, ສ່ວນຕົວ, 250㎡",
    prop3_title: "ອາພາດເມນຕົວຢ່າງດີ",
    prop3_desc: "ອອກແບບທັນສະໄໝ, 80㎡, ຊັ້ນກາງ",
    prop4_title: "ບ້ານພາຍໃນພື້ນທີ່ການສຶກສາ",
    prop4_desc: "ສະບັບໃກ້ຮຽນ, 100㎡, ຊັ້ນຕ່ຳ",
    label_area: "ພື້ນທີ່",
    label_floor: "ຊັ້ນ",
    label_room: "ຫ້ອງນອນ",
    details_btn: "ເບິ່ງລາຍລະອຽດ"
  }
};

// ✅ 多语言结构的楼层 + 户型
const propertyDetails = [
  {
    area: 120,
    floor: { zh: "高层", lo: "ຊັ້ນສູງ" },
    room: { zh: "三室两厅", lo: "3 ຫ້ອງນອນ 2 ຫ້ອງນັ່ງ" }
  },
  {
    area: 250,
    floor: { zh: "独栋别墅", lo: "ວິລລ່າສ່ວນຕົວ" },
    room: { zh: "四室三厅", lo: "4 ຫ້ອງນອນ 3 ຫ້ອງນັ່ງ" }
  },
  {
    area: 80,
    floor: { zh: "中层", lo: "ຊັ້ນກາງ" },
    room: { zh: "一室一厅", lo: "1 ຫ້ອງນອນ 1 ຫ້ອງນັ່ງ" }
  },
  {
    area: 100,
    floor: { zh: "低层", lo: "ຊັ້ນຕ່ຳ" },
    room: { zh: "三室一厅", lo: "3 ຫ້ອງນອນ 1 ຫ້ອງນັ່ງ" }
  }
];

const propertyList = [
  { image: "house-images/house1/1.jpg", titleKey: "prop1_title", descKey: "prop1_desc", price: 85000000, details: propertyDetails[0] },
  { image: "house-images/house2/2.jpg", titleKey: "prop2_title", descKey: "prop2_desc", price: 135000000, details: propertyDetails[1] },
  { image: "house-images/house3/3.jpg", titleKey: "prop3_title", descKey: "prop3_desc", price: 60000000, details: propertyDetails[2] },
  { image: "house-images/house4/4.jpg", titleKey: "prop4_title", descKey: "prop4_desc", price: 75000000, details: propertyDetails[3] }
];

let currentPage = 1;
const itemsPerPage = 12;
let filteredList = [...propertyList];

function applyTranslations(lang) {
  const dict = translations[lang];
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (typeof dict[key] === 'string') el.textContent = dict[key];
    else if (typeof dict[key] === 'function' && el.id === 'pageInfo') {
      const totalPages = Math.ceil(filteredList.length / itemsPerPage);
      el.textContent = dict[key](currentPage, totalPages);
    }
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (dict[key]) el.placeholder = dict[key];
  });
  document.title = dict.title;
}

function setLanguage(lang) {
  localStorage.setItem('siteLang', lang);
  applyTranslations(lang);
  filterProperties();
}

function renderProperties() {
  const lang = localStorage.getItem('siteLang') || 'zh';
  const dict = translations[lang];
  const start = (currentPage - 1) * itemsPerPage;
  const end = start + itemsPerPage;
  const items = filteredList.slice(start, end);

  const container = document.getElementById('propertyContainer');
  container.innerHTML = '';

  items.forEach(p => {
    const card = document.createElement('div');
    card.className = 'property-card';
    card.innerHTML = `
      <img src="${p.image}" alt="${dict[p.titleKey]}" />
      <h3>${dict[p.titleKey]}</h3>
      <p>${dict[p.descKey]}</p>
      <div class="details">
        ${dict.label_area}: ${p.details.area}㎡ |
        ${dict.label_floor}: ${p.details.floor[lang]} |
        ${dict.label_room}: ${p.details.room[lang]}
      </div>
      <div class="price">${p.price.toLocaleString()} ${dict.currency}</div>
      <button class="details-btn">${dict.details_btn}</button>
    `;
    card.addEventListener('click', () => {
      window.location.href = `house-detail.html?id=${propertyList.indexOf(p)}`;
    });
    container.appendChild(card);
  });

  const totalPages = Math.ceil(filteredList.length / itemsPerPage);
  document.getElementById('pageInfo').innerText = dict.page_info(currentPage, totalPages);
  document.getElementById('prevPage').disabled = currentPage <= 1;
  document.getElementById('nextPage').disabled = currentPage >= totalPages;
}

function changePage(delta) {
  const totalPages = Math.ceil(filteredList.length / itemsPerPage);
  currentPage = Math.max(1, Math.min(currentPage + delta, totalPages));
  renderProperties();
}

function filterProperties() {
  const keyword = document.getElementById('searchInput').value.toLowerCase();
  const min = parseFloat(document.getElementById('minPrice').value) || 0;
  const max = parseFloat(document.getElementById('maxPrice').value) || Infinity;
  const lang = localStorage.getItem('siteLang') || 'zh';
  const dict = translations[lang];
  const sortOrder = document.getElementById('sortOrder').value;

  filteredList = propertyList.filter(p => {
    const title = dict[p.titleKey].toLowerCase();
    const desc = dict[p.descKey].toLowerCase();
    return (title.includes(keyword) || desc.includes(keyword)) && p.price >= min && p.price <= max;
  });

  if (sortOrder === 'price_asc') {
    filteredList.sort((a, b) => a.price - b.price);
  } else if (sortOrder === 'price_desc') {
    filteredList.sort((a, b) => b.price - a.price);
  }

  currentPage = 1;
  renderProperties();
}

window.setLanguage = setLanguage;
document.addEventListener('DOMContentLoaded', () => {
  const lang = localStorage.getItem('siteLang') || 'zh';
  applyTranslations(lang);
  renderProperties();
  document.getElementById('searchInput').addEventListener('input', filterProperties);
  document.getElementById('minPrice').addEventListener('input', filterProperties);
  document.getElementById('maxPrice').addEventListener('input', filterProperties);
  document.getElementById('sortOrder').addEventListener('change', filterProperties);
});
</script>

</body>
</html>
