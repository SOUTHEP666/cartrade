<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title id="page-title">土地交易</title>
  <style>
    body {
      font-family: 'Microsoft YaHei', sans-serif;
      background: #f3f4f2;
      margin: 0;
      padding: 0;
    }

    header {
      background: #64a95f;
      color: white;
      padding: 30px 0;
      text-align: center;
    }

    .lang-switch {
      margin-top: 10px;
    }

    .lang-switch button {
      margin: 0 5px;
      padding: 6px 12px;
      border: none;
      border-radius: 16px;
      background: white;
      color: #4a7c46;
      cursor: pointer;
    }

    .filters {
      display: flex;
      flex-wrap: wrap;
      justify-content: center;
      gap: 10px;
      background: #e4f2dd;
      padding: 20px;
    }

    .filters input, .filters select {
      padding: 8px;
      border-radius: 6px;
      border: 1px solid #ccc;
    }

    .grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 20px;
      padding: 20px;
      max-width: 1200px;
      margin: 0 auto;
    }

    .card {
      background: white;
      border-radius: 10px;
      overflow: hidden;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
      cursor: pointer;
      transition: transform 0.2s;
    }

    .card:hover {
      transform: translateY(-5px);
    }

    .card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
    }

    .card .info {
      padding: 15px;
    }

    .card h3 {
      margin: 0 0 10px;
      font-size: 18px;
      color: #3d6c3c;
    }

    .card p {
      margin: 0 0 10px;
      font-size: 14px;
      color: #555;
    }

    .card .price {
      font-weight: bold;
      color: #64a95f;
    }

    .pagination {
      text-align: center;
      margin: 20px;
    }

    .pagination button {
      padding: 8px 16px;
      margin: 0 5px;
      border: none;
      background: #a5d78d;
      border-radius: 16px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<header>
  <h1 id="title">土地列表</h1>
  <div class="lang-switch">
    <button onclick="setLang('zh')">中文</button>
    <button onclick="setLang('lo')">ລາວ</button>
  </div>
</header>

<div class="filters">
  <input type="text" id="search" placeholder="搜索..." />
  <input type="number" id="minPrice" placeholder="最低价" />
  <input type="number" id="maxPrice" placeholder="最高价" />
  <select id="sort">
    <option value="default">默认排序</option>
    <option value="asc">价格升序</option>
    <option value="desc">价格降序</option>
  </select>
</div>

<div class="grid" id="list"></div>

<div class="pagination">
  <button onclick="prevPage()" id="prevBtn">上一页</button>
  <span id="pageInfo">第 1 页</span>
  <button onclick="nextPage()" id="nextBtn">下一页</button>
</div>

<script>
const data = [
  { id: 0, title_zh: "市中心商业地", title_lo: "ທີ່ດິນໃນເມືອງ", desc_zh: "适合建商铺", desc_lo: "ເໝາະຮ້ານຄ້າ", price: 30000000, image: "land-images/land1/1.jpg" },
  { id: 1, title_zh: "郊区农业地", title_lo: "ທີ່ດິນກະສິກໍາ", desc_zh: "适合种植养殖", desc_lo: "ປູກຜັກໄດ້", price: 18000000, image: "land-images/land2/2.jpg" },
  { id: 2, title_zh: "湄公河边地", title_lo: "ທີ່ດິນຕາມແມ່ນ້ຳ", desc_zh: "风景优美", desc_lo: "ທິວທັດງາມ", price: 26000000, image: "land-images/land3/3.jpg" },
  { id: 3, title_zh: "工业区仓储地", title_lo: "ທີ່ດິນໂຮງງານ", desc_zh: "适合建设厂房", desc_lo: "ສ້າງໂຮງງານ", price: 32000000, image: "land-images/land4/4.jpg" }
];

const translations = {
  zh: {
    title: "土地列表",
    pageTitle: "土地交易",
    search: "搜索...",
    minPrice: "最低价",
    maxPrice: "最高价",
    sortDefault: "默认排序",
    sortAsc: "价格升序",
    sortDesc: "价格降序",
    prev: "上一页",
    next: "下一页",
    pageInfo: (page, total) => `第 ${page} 页`
  },
  lo: {
    title: "ລາຍການທີ່ດິນ",
    pageTitle: "ການຊື້ຂາຍທີ່ດິນ",
    search: "ຄົ້ນຫາ...",
    minPrice: "ລາຄາຕໍ່າສຸດ",
    maxPrice: "ລາຄາສູງສຸດ",
    sortDefault: "ຈັດລຽງປົກກະຕິ",
    sortAsc: "ລາຄາຕໍ່ໍ່ຕ່ໍາ",
    sortDesc: "ລາຄາຕໍ່ສູງ",
    prev: "ຫນ້າກ່ອນ",
    next: "ຫນ້າຕໍ່ໄປ",
    pageInfo: (page, total) => `ຫນ້າ ${page}`
  }
};

let currentLang = localStorage.getItem('lang') || 'zh';
let currentPage = 1;
const itemsPerPage = 12;

function setLang(lang) {
  currentLang = lang;
  localStorage.setItem('lang', lang);
  updateTexts();
  render();
}

function updateTexts() {
  const t = translations[currentLang];
  document.getElementById('title').innerText = t.title;
  document.getElementById('page-title').innerText = t.pageTitle;
  document.getElementById('search').placeholder = t.search;
  document.getElementById('minPrice').placeholder = t.minPrice;
  document.getElementById('maxPrice').placeholder = t.maxPrice;

  const sort = document.getElementById('sort');
  sort.options[0].text = t.sortDefault;
  sort.options[1].text = t.sortAsc;
  sort.options[2].text = t.sortDesc;

  document.getElementById('prevBtn').innerText = t.prev;
  document.getElementById('nextBtn').innerText = t.next;
}

function render() {
  const t = translations[currentLang];
  const search = document.getElementById('search').value.toLowerCase();
  const min = parseFloat(document.getElementById('minPrice').value) || 0;
  const max = parseFloat(document.getElementById('maxPrice').value) || Infinity;
  const sort = document.getElementById('sort').value;

  let filtered = data.filter(item => {
    const title = item['title_' + currentLang].toLowerCase();
    const desc = item['desc_' + currentLang].toLowerCase();
    return (title.includes(search) || desc.includes(search)) && item.price >= min && item.price <= max;
  });

  if (sort === 'asc') filtered.sort((a,b) => a.price - b.price);
  if (sort === 'desc') filtered.sort((a,b) => b.price - a.price);

  const start = (currentPage - 1) * itemsPerPage;
  const items = filtered.slice(start, start + itemsPerPage);

  const container = document.getElementById('list');
  container.innerHTML = '';

  for (const land of items) {
    const div = document.createElement('div');
    div.className = 'card';
    div.innerHTML = `
      <img src="${land.image}" />
      <div class="info">
        <h3>${land['title_' + currentLang]}</h3>
        <p>${land['desc_' + currentLang]}</p>
        <div class="price">${land.price.toLocaleString()} ₭</div>
      </div>
    `;
    div.onclick = () => window.location.href = `land-detail.html?id=${land.id}`;
    container.appendChild(div);
  }

  document.getElementById('pageInfo').innerText = t.pageInfo(currentPage, Math.ceil(filtered.length / itemsPerPage));
}

function nextPage() {
  currentPage++;
  render();
}
function prevPage() {
  currentPage = Math.max(1, currentPage - 1);
  render();
}

document.getElementById('search').addEventListener('input', () => { currentPage = 1; render(); });
document.getElementById('minPrice').addEventListener('input', () => { currentPage = 1; render(); });
document.getElementById('maxPrice').addEventListener('input', () => { currentPage = 1; render(); });
document.getElementById('sort').addEventListener('change', () => { currentPage = 1; render(); });

setLang(currentLang);
</script>

</body>
</html>
