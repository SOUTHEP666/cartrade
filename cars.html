<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title data-i18n="title">ËÄÅÊåù‰∫§ÊòìÈÄö - ‰∫åÊâãËΩ¶</title>
  <style>
    * {
      box-sizing: border-box;
      margin: 0; padding: 0;
    }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: #0f0f1a;
      color: #fff;
      animation: fadeInBody 1.2s ease both;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
    }
    @keyframes fadeInBody {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    header {
      background: linear-gradient(to right, #00ffae, #00bfff);
      color: #000;
      padding: 40px 20px;
      text-align: center;
      animation: slideDown 1s ease-out both;
      box-shadow: 0 4px 20px rgba(0, 255, 200, 0.6);
    }
    @keyframes slideDown {
      from { opacity: 0; transform: translateY(-40px); }
      to { opacity: 1; transform: translateY(0); }
    }
    header h1 {
      font-size: 2.4em;
      font-weight: bold;
      text-shadow: 0 0 8px rgba(0, 255, 255, 0.6);
    }
    .lang-buttons {
      margin-top: 10px;
    }
    .lang-buttons button {
      background: #fff;
      color: #000;
      border: none;
      padding: 6px 14px;
      border-radius: 18px;
      margin: 0 5px;
      cursor: pointer;
      font-weight: bold;
      transition: all 0.3s ease;
    }
    .lang-buttons button:hover {
      background: #00ffae;
      color: #000;
    }
    main {
      flex: 1;
      padding: 40px 20px;
      max-width: 1200px;
      margin: auto;
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 30px;
    }
    .product-card {
      background: #1c1c2c;
      border-radius: 20px;
      overflow: hidden;
      text-align: center;
      color: #fff;
      box-shadow: 0 0 12px rgba(0, 255, 255, 0.2);
      transition: transform 0.4s ease, box-shadow 0.4s ease;
      border: 1px solid rgba(0,255,255,0.3);
      position: relative;
      cursor: pointer;
      display: flex;
      flex-direction: column;
    }
    .product-card::before {
      content: '';
      position: absolute;
      top: -2px; left: -2px; right: -2px; bottom: -2px;
      background: linear-gradient(45deg, #00ffe0, #00bfff, #00ffe0);
      z-index: -1;
      filter: blur(10px);
      opacity: 0;
      transition: opacity 0.5s ease;
      border-radius: 20px;
    }
    .product-card:hover::before {
      opacity: 1;
    }
    .product-card:hover {
      transform: translateY(-10px) scale(1.03);
      box-shadow: 0 10px 30px rgba(0, 255, 255, 0.5);
    }
    .product-card img {
      width: 100%;
      height: 160px;
      object-fit: cover;
      filter: brightness(1.1) contrast(1.1);
      transition: transform 0.4s ease;
      border-bottom: 1px solid #00ffae;
    }
    .product-card:hover img {
      transform: scale(1.05);
    }
    .product-card h3 {
      margin: 15px 10px 8px;
      font-size: 1.3em;
      font-weight: bold;
      color: #00ffe0;
    }
    .product-card:hover h3 {
      color: #00ffbb;
    }
    .product-card p {
      margin: 0 15px 10px;
      font-size: 0.9em;
      color: #aaa;
      flex-grow: 1;
    }
    .product-card .details {
      font-size: 0.85em;
      color: #66ffff;
      margin: 5px 15px 15px;
    }
    .product-card .price {
      color: #00ffae;
      font-weight: bold;
      margin-bottom: 15px;
      font-size: 1.1em;
    }
    .product-card button.details-btn {
      margin: 0 15px 15px;
      padding: 10px;
      background: linear-gradient(to right, #00ffae, #00bfff);
      border: none;
      border-radius: 30px;
      color: #000;
      font-weight: bold;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .product-card button.details-btn:hover {
      background: linear-gradient(to right, #00bfff, #00ffae);
    }

    .controls {
      max-width: 1200px;
      margin: 20px auto;
      display: flex;
      justify-content: center;
      gap: 20px;
      flex-wrap: wrap;
    }
    .controls input[type="text"], .controls input[type="number"], .controls select {
      padding: 10px 15px;
      border-radius: 15px;
      border: none;
      font-size: 1em;
      width: 220px;
      max-width: 90vw;
      box-shadow: 0 0 10px rgba(0,255,255,0.2);
      background: #222233;
      color: #fff;
      outline: none;
      transition: box-shadow 0.3s ease;
    }
    .controls input[type="text"]:focus,
    .controls input[type="number"]:focus,
    .controls select:focus {
      box-shadow: 0 0 14px #00ffae;
    }

    .pagination {
      text-align: center;
      margin: 20px;
      font-size: 1.1em;
      user-select: none;
    }
    .pagination button {
      background: linear-gradient(to right, #00ffae, #00bfff);
      border: none;
      color: #000;
      padding: 10px 20px;
      margin: 0 15px;
      border-radius: 30px;
      cursor: pointer;
      font-weight: bold;
      transition: transform 0.3s ease;
    }
    .pagination button:disabled {
      opacity: 0.5;
      cursor: not-allowed;
    }
    .pagination button:hover:not(:disabled) {
      transform: scale(1.1);
    }

    .back-home {
      display: inline-block;
      margin: 30px auto 40px;
      padding: 12px 30px;
      background: linear-gradient(to right, #00ffae, #00bfff);
      color: #000;
      font-weight: bold;
      border-radius: 30px;
      text-decoration: none;
      box-shadow: 0 4px 12px rgba(0, 255, 200, 0.6);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      align-self: center;
    }
    .back-home:hover {
      transform: scale(1.05);
      box-shadow: 0 6px 18px rgba(0, 255, 200, 0.8);
    }

    footer {
      text-align: center;
      padding: 15px 10px;
      font-size: 0.9em;
      color: #444;
      background: #000814;
      box-shadow: inset 0 1px 6px #00ffae;
      user-select: none;
    }

    /* üì± ÂìçÂ∫îÂºèÂ∏ÉÂ±Ä */
    @media (max-width: 1024px) {
      main {
        grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
        padding: 30px 15px;
        gap: 24px;
      }
      .product-card img {
        height: 140px;
      }
    }
    @media (max-width: 768px) {
      header {
        padding: 30px 15px;
      }
      header h1 {
        font-size: 1.6em;
      }
      .controls input[type="text"], .controls input[type="number"], .controls select {
        width: 100%;
        max-width: 100%;
      }
      .back-home {
        padding: 10px 20px;
        font-size: 0.95em;
      }
      .product-card img {
        height: 120px;
      }
    }
    @media (max-width: 500px) {
      main {
        grid-template-columns: 1fr;
        padding: 20px 10px;
        gap: 20px;
      }
      .product-card img {
        height: 180px;
      }
    }
  </style>
</head>
<body>

<header>
  <h1 data-i18n="cars">‰∫åÊâãËΩ¶ÂàóË°®</h1>
  <div class="lang-buttons">
    <button onclick="setLanguage('zh')">‰∏≠Êñá</button>
    <button onclick="setLanguage('lo')">‡∫û‡∫≤‡∫™‡∫≤‡∫•‡∫≤‡∫ß</button>
  </div>
</header>

<div class="controls">
  <input type="text" id="searchInput" data-i18n-placeholder="search_placeholder" placeholder="ÊêúÁ¥¢ËΩ¶ËæÜ..." />
  <input type="number" id="minPrice" data-i18n-placeholder="min_price" placeholder="ÊúÄ‰Ωé‰ª∑" min="0" />
  <input type="number" id="maxPrice" data-i18n-placeholder="max_price" placeholder="ÊúÄÈ´ò‰ª∑" min="0" />
  <select id="sortOrder">
    <option value="default" data-i18n="sort_default">ÈªòËÆ§ÊéíÂ∫è</option>
    <option value="price_asc" data-i18n="sort_price_asc">‰ª∑Ê†ºÂçáÂ∫è</option>
    <option value="price_desc" data-i18n="sort_price_desc">‰ª∑Ê†ºÈôçÂ∫è</option>
  </select>
</div>

<main id="carContainer"></main>

<div class="pagination">
  <button id="prevPage" onclick="changePage(-1)" data-i18n="prev_page">‰∏ä‰∏ÄÈ°µ</button>
  <span id="pageInfo"></span>
  <button id="nextPage" onclick="changePage(1)" data-i18n="next_page">‰∏ã‰∏ÄÈ°µ</button>
</div>

<a href="index.html" class="back-home" data-i18n="back_home">ËøîÂõûÈ¶ñÈ°µ</a>

<footer>¬© 2025 ËÄÅÊåù‰∫§ÊòìÈÄö ‰∫åÊâãËΩ¶‰∫§ÊòìÂπ≥Âè∞</footer>

<script>
const translations = {
  zh: {
    title: "ËÄÅÊåù‰∫§ÊòìÈÄö - ‰∫åÊâãËΩ¶",
    cars: "‰∫åÊâãËΩ¶ÂàóË°®",
    back_home: "ËøîÂõûÈ¶ñÈ°µ",
    search_placeholder: "ÊêúÁ¥¢ËΩ¶ËæÜ...",
    min_price: "ÊúÄ‰Ωé‰ª∑",
    max_price: "ÊúÄÈ´ò‰ª∑",
    prev_page: "‰∏ä‰∏ÄÈ°µ",
    next_page: "‰∏ã‰∏ÄÈ°µ",
    page_info: (current, total) => `Á¨¨ ${current} È°µ / ÂÖ± ${total} È°µ`,
    currency: "KIP",
    sort_default: "ÈªòËÆ§ÊéíÂ∫è",
    sort_price_asc: "‰ª∑Ê†ºÂçáÂ∫è",
    sort_price_desc: "‰ª∑Ê†ºÈôçÂ∫è",
    car1_title: "‰∏∞Áî∞Âç°ÁΩóÊãâ",
    car1_desc: "ÁúÅÊ≤πËÄêÁî®ÔºåÈÄÇÂêàÂüéÂ∏Ç‰ª£Ê≠•Ôºå2018Âπ¥Ê¨æ",
    car2_title: "Áé∞‰ª£‰ºäÂÖ∞Áâπ",
    car2_desc: "Á©∫Èó¥Â§ßÔºåÊÄßËÉΩÁ®≥ÂÆöÔºå2020Âπ¥Ê¨æ",
    car3_title: "Êú¨Áî∞ÊÄùÂüü",
    car3_desc: "ËøêÂä®ÁâàÔºåÂä®ÂäõÂçÅË∂≥Ôºå2019Âπ¥Ê¨æ",
    car4_title: "Êó•‰∫ßÂ§©Á±Å",
    car4_desc: "ËàíÈÄÇÈùôÈü≥ÔºåÈïøÈÄîÂà©Âô®Ôºå2017Âπ¥Ê¨æ",
    transmission_auto: "Ëá™Âä®",
    transmission_manual: "ÊâãÂä®",
    fuel_petrol: "Ê±ΩÊ≤π",
    fuel_diesel: "Êü¥Ê≤π",
    label_year: "Âπ¥‰ªΩ",
    label_mileage: "ÈáåÁ®ã",
    label_transmission: "ÂèòÈÄüÁÆ±",
    label_fuel: "ÁáÉÊñôÁ±ªÂûã",
    details_btn: "Êü•ÁúãËØ¶ÊÉÖ"
  },
  lo: {
    title: "‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫•‡∫ª‡∫î‡∫°‡∫∑‡∫™‡∫≠‡∫á",
    cars: "‡∫•‡∫≤‡∫ç‡∫Å‡∫≤‡∫ô‡∫•‡∫ª‡∫î‡∫°‡∫∑‡∫™‡∫≠‡∫á",
    back_home: "‡∫Å‡∫±‡∫ö‡ªÑ‡∫õ‡ªú‡ªâ‡∫≤‡∫´‡∫º‡∫±‡∫Å",
    search_placeholder: "‡∫Ñ‡∫ª‡ªâ‡∫ô‡∫´‡∫≤‡∫•‡∫ª‡∫î...",
    min_price: "‡∫•‡∫≤‡∫Ñ‡∫≤‡∫ï‡ªà‡ªç‡∫≤‡∫™‡∫∏‡∫î",
    max_price: "‡∫•‡∫≤‡∫Ñ‡∫≤‡∫™‡∫π‡∫á‡∫™‡∫∏‡∫î",
    prev_page: "‡∫´‡∫ô‡ªâ‡∫≤‡∫Å‡ªà‡∫≠‡∫ô",
    next_page: "‡∫´‡∫ô‡ªâ‡∫≤‡∫ï‡ªç‡ªà‡ªÑ‡∫õ",
    page_info: (current, total) => `‡∫´‡∫ô‡ªâ‡∫≤ ${current} / ${total}`,
    currency: "‚Ç≠",
    sort_default: "‡∫à‡∫±‡∫î‡∫•‡∫Ω‡∫á‡∫°‡∫≤‡∫î‡∫ï‡∫∞‡∫ñ‡∫≤‡∫ô",
    sort_price_asc: "‡∫•‡∫≤‡∫Ñ‡∫≤‡∫ï‡ªç‡ªà‡ªç‡ªà‡∫ï‡ªà‡ªç‡∫≤",
    sort_price_desc: "‡∫•‡∫≤‡∫Ñ‡∫≤‡∫ï‡ªç‡ªà‡∫™‡∫π‡∫á",
    car1_title: "Toyota Corolla",
    car1_desc: "‡∫õ‡∫∞‡∫´‡∫ç‡∫±‡∫î‡∫ô‡ªç‡ªâ‡∫≤‡∫°‡∫±‡∫ô ‡∫Ç‡∫±‡∫ö‡∫á‡ªà‡∫≤‡∫ç 2018",
    car2_title: "Hyundai Elantra",
    car2_desc: "‡∫û‡∫∑‡ªâ‡∫ô‡∫ó‡∫µ‡ªà‡∫Å‡∫ß‡ªâ‡∫≤‡∫á ‡∫Ç‡∫±‡∫ö‡∫î‡∫µ 2020",
    car3_title: "Honda Civic",
    car3_desc: "‡∫Æ‡∫π‡∫ö‡∫•‡∫±‡∫Å‡∫™‡∫∞‡ªÑ‡∫ï ‡∫™‡∫∞‡ªÄ‡∫õ‡∫µ‡∫î 2019",
    car4_title: "Nissan Teana",
    car4_desc: "‡∫ô‡∫±‡ªà‡∫á‡∫™‡∫∞‡∫ö‡∫≤‡∫ç ‡ªÄ‡∫á‡∫µ‡∫ö‡∫™‡∫∞‡∫´‡∫á‡∫ª‡∫ö 2017",
    transmission_auto: "‡∫≠‡∫±‡∫î‡∫ï‡∫∞‡ªÇ‡∫ô‡∫°‡∫±‡∫î",
    transmission_manual: "‡ªÅ‡∫ö‡∫ö‡∫°‡∫∑",
    fuel_petrol: "‡∫ô‡ªç‡ªâ‡∫≤‡∫°‡∫±‡∫ô‡∫Å‡∫ª‡∫ô",
    fuel_diesel: "‡∫ô‡ªç‡ªâ‡∫≤‡∫°‡∫±‡∫ô‡∫î‡∫µ‡ªÄ‡∫ä‡∫ß",
    label_year: "‡∫õ‡∫µ",
    label_mileage: "‡∫•‡∫∞‡∫ç‡∫∞‡∫ó‡∫≤‡∫á",
    label_transmission: "‡ªÄ‡∫Å‡∫ç‡∫£",
    label_fuel: "‡∫õ‡∫∞‡ªÄ‡∫û‡∫î‡∫ô‡ªç‡ªâ‡∫≤‡∫°‡∫±‡∫ô",
    details_btn: "‡ªÄ‡∫ö‡∫¥‡ªà‡∫á‡∫•‡∫≤‡∫ç‡∫•‡∫∞‡∫≠‡∫Ω‡∫î"
  }
};

const carDetails = [
  { year: 2018, mileage: 45000, transmission: "auto", fuel: "petrol" },
  { year: 2020, mileage: 30000, transmission: "manual", fuel: "diesel" },
  { year: 2019, mileage: 37000, transmission: "auto", fuel: "petrol" },
  { year: 2017, mileage: 52000, transmission: "auto", fuel: "petrol" }
];

const carList = [
  { image: "car-images/car1/1.jpg", titleKey: "car1_title", descKey: "car1_desc", price: 42000000, details: carDetails[0] },
  { image: "car-images/car2/2.jpg", titleKey: "car2_title", descKey: "car2_desc", price: 53000000, details: carDetails[1] },
  { image: "car-images/car3/3.jpg", titleKey: "car3_title", descKey: "car3_desc", price: 48000000, details: carDetails[2] },
  { image: "car-images/car4/4.jpg", titleKey: "car4_title", descKey: "car4_desc", price: 39000000, details: carDetails[3] }
];

let currentPage = 1;
const itemsPerPage = 12;
let filteredList = [...carList];

function applyTranslations(lang) {
  const dict = translations[lang];
  document.querySelectorAll('[data-i18n]').forEach(el => {
    const key = el.getAttribute('data-i18n');
    if (typeof dict[key] === 'string') el.textContent = dict[key];
    else if (typeof dict[key] === 'function' && el.id === 'pageInfo') {
      const totalPages = Math.ceil(filteredList.length / itemsPerPage);
      el.textContent = dict[key](currentPage, totalPages);
    }
  });
  document.querySelectorAll('[data-i18n-placeholder]').forEach(el => {
    const key = el.getAttribute('data-i18n-placeholder');
    if (dict[key]) el.placeholder = dict[key];
  });
  document.title = dict.title;
}

function setLanguage(lang) {
  localStorage.setItem('siteLang', lang);
  applyTranslations(lang);
  filterCars();
}

function renderCars() {
  const lang = localStorage.getItem('siteLang') || 'zh';
  const dict = translations[lang];
  const start = (currentPage - 1) * itemsPerPage;
  const end = start + itemsPerPage;
  const items = filteredList.slice(start, end);

  const container = document.getElementById('carContainer');
  container.innerHTML = '';

  items.forEach(car => {
    const card = document.createElement('div');
    card.className = 'product-card';
    card.innerHTML = `
      <img src="${car.image}" alt="${dict[car.titleKey]}" />
      <h3>${dict[car.titleKey]}</h3>
      <p>${dict[car.descKey]}</p>
      <div class="details">
        ${dict.label_year}: ${car.details.year} |
        ${dict.label_mileage}: ${car.details.mileage.toLocaleString()} km |
        ${dict.label_transmission}: ${dict['transmission_' + car.details.transmission]} |
        ${dict.label_fuel}: ${dict['fuel_' + car.details.fuel]}
      </div>
      <div class="price">${car.price.toLocaleString()} ${dict.currency}</div>
      <button class="details-btn" data-i18n="details_btn">${dict.details_btn}</button>
    `;
    card.querySelector('button.details-btn').addEventListener('click', e => {
      e.stopPropagation();
      window.location.href = `car-detail.html?id=${carList.indexOf(car)}`;
    });
    card.addEventListener('click', () => {
      window.location.href = `car-detail.html?id=${carList.indexOf(car)}`;
    });
    container.appendChild(card);
  });

  const totalPages = Math.ceil(filteredList.length / itemsPerPage);
  document.getElementById('pageInfo').innerText = dict.page_info(currentPage, totalPages);
  document.getElementById('prevPage').disabled = currentPage <= 1;
  document.getElementById('nextPage').disabled = currentPage >= totalPages;
  applyTranslations(lang);
}

function changePage(delta) {
  const totalPages = Math.ceil(filteredList.length / itemsPerPage);
  currentPage = Math.max(1, Math.min(currentPage + delta, totalPages));
  renderCars();
}

function filterCars() {
  const keyword = document.getElementById('searchInput').value.toLowerCase();
  const min = parseFloat(document.getElementById('minPrice').value) || 0;
  const maxVal = document.getElementById('maxPrice').value;
  const max = maxVal === "" ? Infinity : parseFloat(maxVal);
  const lang = localStorage.getItem('siteLang') || 'zh';
  const dict = translations[lang];
  const sortOrder = document.getElementById('sortOrder').value;

  filteredList = carList.filter(c => {
    const title = dict[c.titleKey].toLowerCase();
    const desc = dict[c.descKey].toLowerCase();
    return (title.includes(keyword) || desc.includes(keyword)) && c.price >= min && c.price <= max;
  });

  if (sortOrder === 'price_asc') {
    filteredList.sort((a,b) => a.price - b.price);
  } else if (sortOrder === 'price_desc') {
    filteredList.sort((a,b) => b.price - a.price);
  }

  currentPage = 1;
  renderCars();
}

window.setLanguage = setLanguage;
document.addEventListener('DOMContentLoaded', () => {
  const lang = localStorage.getItem('siteLang') || 'zh';
  applyTranslations(lang);
  renderCars();
  document.getElementById('searchInput').addEventListener('input', filterCars);
  document.getElementById('minPrice').addEventListener('input', filterCars);
  document.getElementById('maxPrice').addEventListener('input', filterCars);
  document.getElementById('sortOrder').addEventListener('change', filterCars);
});
</script>
</body>
</html>
